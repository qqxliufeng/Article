<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>投稿</title>
		<!--mui样式-->
		<link rel="stylesheet" href="css/mui.min.css" />
		<!--公用样式样式-->
		<link rel="stylesheet" href="css/comment.css" />
		<!--页面样式-->
		<link rel="stylesheet" href="css/style.css" />
		<!--js-->
		<script type="text/javascript" src="js/jquery-1.8.3.min.js" ></script>
		<!--rem js-->
		<script type="text/javascript" src="js/rem.js" ></script>
		<!--mui js-->
		<script type="text/javascript" src="js/mui.min.js" ></script>
		<!--common js-->
		<script type="text/javascript" src="js/common.js" ></script>
		<!--vue js-->
		<script type="text/javascript" src="js/vue.min.js" ></script>
		<script type="text/javascript" src="js/template.js"></script>
		<style type="text/css">
			img{
				object-fit: cover;
			};
		</style>
	</head>
	<body>
		<!--投稿 -->
		<div class="like whitebg" id="app">
			<ul>
				
					<li class="clearfix" style="display: none;" v-show="list" v-for="item in list" onclick="jumpDet(this)" >
						<input type="hidden" :value="item.articles_id" />
						<div class="fl">
							<div>
								<span class="gary" v-text="item.articles_times"></span>
							</div>
							<nav class="ft8 mt05" v-text="item.articles_content"></nav>
							<div class="clearfix gary mt05">
							    <div class="fl">
		 	 						<img src="images/search-icon_03.png" />
		 	 						<span class="ft55" v-text="item.articles_read">0</span>
		 	 					</div>
		 	 					<div class="fl">
		 	 						<img src="images/search-icon_05.png" />
		 	 						<span class="ft55" v-text="item.articles_commentCount">0</span>
		 	 					</div>
		 	 					<div class="fl">
		 	 						<img src="images/search-icon_07.png" />
		 	 						<span class="ft55" v-text="item.articles_loveCount">0</span>
		 	 					</div>
							</div>
						</div>
					
						<img :src="pic" class="fr" v-if="item.articles_picCount > 0 && index <= 0" v-for="(pic, index) in item.articles_pic" />
				
					</li>
					<div class="loadMore animate" style="margin-top: 2rem;clear: both;">
						<img src="images/loading@2x.png">加载更多
					</div>
		
			</ul>
		</div>
		<script id="list-template" type="text/html">
			{{each items as item index}}
			<li class="clearfix" v-for="item in list">
				<div class="fl">
					<div>
						<span class="gary">{{item.articles_times}}</span>
					</div>
					<nav class="ft8 mt05">{{item.articles_content}}</nav>
					<div class="clearfix gary mt05">
					    <div class="fl">
 	 						<img src="images/search-icon_03.png" />
 	 						<span class="ft55">{{item.articles_read}}</span>
 	 					</div>
 	 					<div class="fl">
 	 						<img src="images/search-icon_05.png" />
 	 						<span class="ft55">{{item.articles_commentCount}}</span>
 	 					</div>
 	 					<div class="fl">
 	 						<img src="images/search-icon_07.png" />
 	 						<span class="ft55">{{item.articles_loveCount}}</span>
 	 					</div>
					</div>
				</div>
			    
		    	{{each item.articles_pic as pic key}}
		    	  {{if item.articles_picCount > 0 && key<=0 }}
			        <img src="{{pic}}" class="fr"  />
			      {{/if}}
			    {{/each}}
		        
			</li>
			{{/each}}
		</script>
	 <script>
		 
		$(function() {
		   //获取webview.js  返回的用户ID
//		   var uid  = 655
//		   var Type = 1
           var uid  = article.getUserId()
           var type = article.getArticleType()
			//实例化vue
			vue = new Vue({
				el: '#app',
				data: {
					list: [],
				},
				methods: {
					getData: function() { //我的文章

						dataRequest.method("/api/member/myArticle", {
							'uid': uid,
							'status':Type
						}, "post", function(res) {
                            
							if(res.code == 200) {
								vue.list = res.result
								setTimeout(function() {
									//上拉加载
									data_lod(res.arr, '/api/member/myArticle', {
										'uid': uid,
										'status':Type
									})
								}, 5)
							} else {
								data_lod(0, '/api/member/myArticle', {
									'uid': uid,
									'status':Type
								})
							}

						})

					}

				}
			})
			vue.getData()

		})
		function jumpDet(obj){
		   var aid =  $(obj).children().val()
		   article.jump(article.getArticleType(),aid)
		}
	 </script>

	</body>
</html>
       